parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"gkAU":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.STATIC=0]="STATIC",e[e.DYNAMIC=1]="DYNAMIC"}(e=exports.LayerType||(exports.LayerType={}));
},{}],"FljV":[function(require,module,exports) {
"use strict";function e(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function r(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("../types"),i=function(){function r(){e(this,r),this.staticLayers=[],this.dynamicLayers=[],this.shouldRender=!0,this.lastFrameRenderedTime=null,this.renderingId=null,this.requestFrameA=this.requestFrameA.bind(this),this.requestFrameB=this.requestFrameB.bind(this)}return t(r,[{key:"getLayer",value:function(e,r){return r===n.LayerType.DYNAMIC?this.dynamicLayers.find(function(r){return r.layerIndex===e})||null:this.staticLayers.find(function(r){return r.layerIndex===e})||null}},{key:"registerLayer",value:function(e){e.layerType===n.LayerType.DYNAMIC?this.dynamicLayers.push(e):this.staticLayers.push(e)}},{key:"start",value:function(){this.shouldRender=!0,this.renderingId=window.requestAnimationFrame(this.requestFrameA)}},{key:"stop",value:function(){this.shouldRender=!1,this.renderingId&&window.cancelAnimationFrame(this.renderingId)}},{key:"requestFrameA",value:function(e){this.render(e),this.shouldRender&&(this.renderingId=window.requestAnimationFrame(this.requestFrameB))}},{key:"requestFrameB",value:function(e){this.render(e),this.shouldRender&&(this.renderingId=window.requestAnimationFrame(this.requestFrameA))}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.lastFrameRenderedTime||(this.lastFrameRenderedTime=e);var r=e-this.lastFrameRenderedTime;this.lastFrameRenderedTime=e;for(var t=0;t<this.dynamicLayers.length;t++)this.dynamicLayers[t].update(r),this.dynamicLayers[t].render()}}]),r}();exports.default=i;
},{"../types":"gkAU"}],"AQsV":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("../types"),r=function(){function t(n,i,r){e(this,t),this.layerIndex=n,this.layerType=i,this.entities=[],r&&this.addEntity(r),this.width=document.body.clientWidth+1,this.height=document.body.clientHeight+1;var a=document.createElement("canvas");a.width=this.width,a.height=this.height,a.style.top="0",a.style.left="0",a.style.position="absolute",a.style.zIndex="".concat(this.layerIndex),a.style.display="inline",document.body.appendChild(a);var s=a.getContext("2d");if(!s)throw new Error("Could not initialize canvas 2D context.");this.context=s,this.context.translate(-.5,-.5)}return n(t,[{key:"addEntity",value:function(e){if(!this._entityIsRenderable(e))throw new Error("All entities must have a render function.");if(this.layerType===i.LayerType.DYNAMIC&&!this._entityIsUpdatable(e))throw new Error("All entities of dynamic layers must have an updater function.");this.entities.push(e)}},{key:"removeEntity",value:function(e){var t=this.entities.indexOf(e);-1!==t&&this.entities.splice(t,1)}},{key:"getContext",value:function(){return this.context}},{key:"clear",value:function(){this.context.clearRect(-1,-1,this.width,this.height)}},{key:"update",value:function(e){if(this.layerType===i.LayerType.DYNAMIC)for(var t=0;t<this.entities.length;t++)this.entities[t].update(e)}},{key:"render",value:function(){this.clear();for(var e=0;e<this.entities.length;e++)this.entities[e].render(this.context)}},{key:"_entityIsRenderable",value:function(e){return Boolean(e.render)}},{key:"_entityIsUpdatable",value:function(e){return Boolean(e.update)}}]),t}();exports.RenderingLayer=r;
},{"../types":"gkAU"}],"fUdq":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var n=r(require("./Engine")),t=require("./Engine");exports.IEngine=t.IEngine;var i=require("./RenderingLayer");exports.IRenderingLayer=i.IRenderingLayer,exports.RenderingLayer=i.RenderingLayer,e(require("./types")),exports.default=n.default;
},{"./Engine":"FljV","./RenderingLayer":"AQsV","./types":"gkAU"}],"HPO4":[function(require,module,exports) {
module.exports="/typescript-render-engine/dog-and-cat-cover.5e67e510.jpg";
},{}],"tXhV":[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var h=i[e];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(t,h.key,h)}}function e(t,e,h){return e&&i(t.prototype,e),h&&i(t,h),t}var h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var i={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(i[e]=t[e]);return i.default=t,i};Object.defineProperty(exports,"__esModule",{value:!0});var n,s,a=h(require("../../src")),r=h(require("./dog-and-cat-cover.jpg"));!function(t){t.BACKGROUND="rgb(14, 17, 37)",t.SCORE_BACKGROUND="#FF0",t.SCORE_TEXT="rgb(14, 17, 37)",t.WALLS="rgb(17,0,244)",t.PACMAN="#FF0"}(n||(n={})),function(t){t[t.BACKGROUND=0]="BACKGROUND",t[t.SCORE=1]="SCORE",t[t.ANIMALS=2]="ANIMALS",t[t.PACMAN=3]="PACMAN"}(s||(s={}));var o=.001,u=.2,l=u/650,d=75/650,y=100,c=200,f=225,g=function(){function i(e,h){t(this,i),this.width=e,this.height=h}return e(i,[{key:"render",value:function(t){t.fillStyle=n.BACKGROUND,t.fillRect(0,0,this.width,this.height),t.fillStyle=n.WALLS,t.fillRect(0,375,this.width,75),t.fillRect(0,0,this.width,75)}}]),i}(),m=function(){function i(e){t(this,i),this.layer=e,this.width=e.width,this.height=e.height,this.score=0}return e(i,[{key:"updateScore",value:function(t){this.score=t,this.layer.render()}},{key:"render",value:function(t){t.fillStyle=n.SCORE_BACKGROUND,t.fillRect(this.width-250,10,200,65),t.fillStyle=n.SCORE_TEXT,t.font="30px Arial",t.fillText("Score: ".concat(this.score),this.width-220,50)}}]),i}(),S=function(){function i(e,h,n){var s=this;t(this,i),this.handleLoad=function(t){return function(){s.img=t,s.layer.addEntity(s)}},this.layer=n,this.width=200,this.height=100,this.x=e,this.y=h-this.height/2;var a=new Image;a.src=r.default,a.onload=this.handleLoad(a)}return e(i,[{key:"getEatten",value:function(){this.layer.removeEntity(this)}},{key:"update",value:function(t){}},{key:"render",value:function(t){this.img&&t.drawImage(this.img,this.x,this.y,this.width,this.height)}}]),i}(),v=function(){function i(e,h,n){var s=this;t(this,i),this.handleLoad=function(t){return function(){s.img=t}},this.isOutOfBounds=function(t){return t+s.radius>s.layer.width||t-s.radius<0},this.layer=e,this.scorer=n,this.animals=h,this.radius=y,this.x=e.width/2,this.y=f,this.orientation="left",this.dx=-d,this.dy=0,this.score=0,this.mouthSize=.2,this.mouthDelta=l,this.mouthStart=Math.PI,this.mouthEnd=2*Math.PI,this.eyeCXdelta=50*Math.cos(.3*Math.PI),this.eyeCYdelta=50*Math.sin(.3*Math.PI);var a=new Image;a.src=r.default,a.onload=this.handleLoad(a)}return e(i,[{key:"changeDirection",value:function(t){"left"===t?(this.orientation="left",this.dx=-Math.abs(this.dx)):"right"===t&&(this.orientation="right",this.dx=Math.abs(this.dx))}},{key:"updateAnimalBounds",value:function(){for(var t=0;t<this.animals.length;t++){var i=this.animals[t],e=this.x;i.x<e&&i.x+i.width>this.x+this.radius&&i.y>this.y-this.radius&&i.y+i.height<this.y+this.radius&&(i.getEatten(),this.score+=1,this.scorer.updateScore(this.score))}}},{key:"updateBody",value:function(t){this.mouthSize+=this.mouthDelta*t,this.mouthSize<=0&&this.mouthDelta<0&&(this.mouthDelta*=-1),this.mouthSize<=0&&(this.mouthSize=o),"left"===this.orientation?(this.mouthStart=Math.PI-this.mouthSize*Math.PI,this.mouthEnd=Math.PI+this.mouthSize*Math.PI):(this.mouthStart=this.mouthSize*Math.PI,this.mouthEnd=(2-this.mouthSize)*Math.PI);var i=(.25+this.mouthSize)*Math.PI;this.eyeCXdelta=50*Math.cos(i),this.eyeCYdelta=50*Math.sin(i),this.mouthSize>u&&this.mouthDelta>0&&(this.mouthDelta*=-1)}},{key:"updatePosition",value:function(t){var i=this.x+this.dx*t;this.isOutOfBounds(i)||(this.x=i),this.updateAnimalBounds()}},{key:"update",value:function(t){this.updateBody(t),this.updatePosition(t)}},{key:"render",value:function(t){t.beginPath(),t.arc(this.x,this.y,100,this.mouthStart,this.mouthEnd,"left"===this.orientation),t.lineTo(this.x,this.y),t.closePath(),t.fillStyle=n.PACMAN,t.fill(),t.strokeStyle="#000",t.stroke(),t.beginPath();var i="right"===this.orientation?1:-1;t.arc(this.x+this.eyeCXdelta*i,this.y-this.eyeCYdelta,10,0,2*Math.PI),t.fillStyle="#000",t.fill(),t.strokeStyle="#FFF",t.stroke()}}]),i}(),w=new a.default,A=new a.RenderingLayer(s.BACKGROUND,a.LayerType.STATIC),C=new g(A.width,A.height);A.addEntity(C),w.registerLayer(A),A.render();var M=new a.RenderingLayer(s.ANIMALS,a.LayerType.DYNAMIC);new S(c,f,M),new S(c+300,f,M),new S(c+600,f,M),new S(c+900,f,M),new S(c+1200,f,M),w.registerLayer(M);var P=new a.RenderingLayer(s.SCORE,a.LayerType.STATIC),p=new m(P);P.addEntity(p),w.registerLayer(P),P.render();var L=new a.RenderingLayer(s.PACMAN,a.LayerType.DYNAMIC),I=new v(L,M.entities,p);L.addEntity(I),w.registerLayer(L),w.start(),document.body.onkeydown=function(t){"d"===t.key?I.changeDirection("right"):"a"===t.key&&I.changeDirection("left")};
},{"../../src":"fUdq","./dog-and-cat-cover.jpg":"HPO4"}]},{},["tXhV"], null)
//# sourceMappingURL=/typescript-render-engine/pacman-animals.30aa6d3f.js.map